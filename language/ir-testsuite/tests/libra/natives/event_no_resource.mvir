module ResourceHandle {
    import 0x1.Event;
import 0x1.Coin1;
    import 0x1.Diem;
    resource T {
        foo: Event.EventHandle<Diem.Diem<Coin1.Coin1>>
        // check: CONSTRAINT_KIND_MISMATCH
    }

    public new(): Self.T {
        let handle: Event.EventHandle<Diem.Diem<Coin1.Coin1>>;
        handle = Event.new_event_handle<Diem.Diem<Coin1.Coin1>>();
        return T { foo: move(handle) };
    }
}
